(()=>{"use strict";var t=document.querySelector(".todo__list"),e=document.querySelector(".todo__btn"),n=document.querySelector(".todo__alert"),o=document.querySelector(".todo__input");function c(){var e=[];t.querySelectorAll("li").forEach((function(t){var n=t.querySelector('input[type="checkbox"]'),o=t.querySelector("span");e.push({id:t.dataset.id,text:o.textContent,isDone:n.checked})})),fetch("http://localhost:5555/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){return console.log("Відповідь від сервера:",t)})).catch((function(t){return console.error("Помилка при відправці даних:",t)}))}function r(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now().toString(),c=document.createElement("li");c.dataset.id=o;var r=document.createElement("input");r.type="checkbox",r.checked=n,c.appendChild(r);var a=document.createElement("span");a.textContent=e,c.appendChild(a);var d=document.createElement("button");d.textContent="X",d.classList.add("todo__btn-danger"),c.appendChild(d),t.appendChild(c)}document.addEventListener("DOMContentLoaded",(function(){fetch("http://localhost:5555/todos").then((function(t){return t.json()})).then((function(t){console.log("Відповідь від сервера:",t),t.todos.forEach((function(t){r(t.text,t.isDone,t.id)}))})).catch((function(t){return console.error("Помилка при відправці даних:",t)}))})),t.addEventListener("click",(function(t){if("BUTTON"===t.target.tagName){var e=t.target.parentElement,n=e.dataset.id;fetch("http://localhost:5555/todos/".concat(n),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){console.log("Видалено:",t),e.remove(),c()})).catch((function(t){return console.error("Помилка при видаленні:",t)}))}})),t.addEventListener("change",(function(t){if("checkbox"===t.target.type){var e=t.target,n=e.closest("li").dataset.id,o=e.checked;fetch("http://localhost:5555/todos/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDone:o})}).then((function(t){return t.json()})).then((function(t){console.log("Оновлено:",t),c()})).catch((function(t){return console.error("Помилка при оновленні:",t)}))}})),e.addEventListener("click",(function(t){t.preventDefault();var e=o.value.trim();if(""===e)return n.style.display="block",o.focus(),void o.addEventListener("input",(function t(){n.style.display="none",o.removeEventListener("input",t)}));r(e),o.value="",c()})),t.addEventListener("click",(function(t){"SPAN"===t.target.tagName&&(i("flex"),d.textContent=t.target.textContent)}));var a=document.body.querySelector(".modal__owerlay"),d=document.body.querySelector(".modal__content");function i(t){a.style.display=t}var l=document.body.querySelector(".modal__btn--cancel"),u=document.body.querySelector(".modal__close");document.addEventListener("keydown",(function(t){"Escape"===t.key?i("none"):"Enter"===t.key&&(t.preventDefault(),i("none"))})),a.addEventListener("click",(function(t){var e=t.target;e!==a&&e!==u&&e!==l||i("none")}))})();